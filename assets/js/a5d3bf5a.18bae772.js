(self.webpackChunkserenity_js_org=self.webpackChunkserenity_js_org||[]).push([[9580],{91413:(e,t,s)=>{e.exports={src:{srcSet:s.p+"assets/ideal-img/vs-code-type-safe-assertions.13bceb5.2230.png 2230w",images:[{path:s.p+"assets/ideal-img/vs-code-type-safe-assertions.13bceb5.2230.png",width:2230,height:522}],src:s.p+"assets/ideal-img/vs-code-type-safe-assertions.13bceb5.2230.png",toString:function(){return s.p+"assets/ideal-img/vs-code-type-safe-assertions.13bceb5.2230.png"},placeholder:void 0,width:2230,height:522},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAACCAYAAABhYU3QAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAP0lEQVR4nC2HyQ2AMBDE0goT7ZUAQum/NyOOh2W7uTvrOjn2wZyTyiKziHgI3AMzo20SVfWOx6BbIHUk/f76BphxHOoGu3WfAAAAAElFTkSuQmCC"}},24540:(e,t,s)=>{"use strict";s.r(t),s.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>c,toc:()=>h});var n=s(74848),a=s(28453),i=s(45645),r=s(7227);const o={sidebar_position:1,title:"Your first API scenario"},l="Your first API test scenario",c={id:"api-testing/your-first-api-scenario",title:"Your first API scenario",description:"Serenity/JS streamlines  designing and implementing test scenarios that interact with REST- and other HTTP-based APIs.",source:"@site/src/docs/handbook/api-testing/your-first-api-scenario.mdx",sourceDirName:"api-testing",slug:"/api-testing/your-first-api-scenario",permalink:"/handbook/api-testing/your-first-api-scenario",draft:!1,unlisted:!1,editUrl:"https://github.com/serenity-js/serenity-js.org/tree/main/src/docs/handbook/api-testing/your-first-api-scenario.mdx",tags:[],version:"current",lastUpdatedAt:1730676641e3,sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Your first API scenario"},sidebar:"docs",previous:{title:"API testing",permalink:"/handbook/api-testing/"},next:{title:"Configuring the HTTP client",permalink:"/handbook/api-testing/configuring-http-client"}},d={},h=[{value:"Writing dedicated API test scenarios",id:"writing-dedicated-api-test-scenarios",level:2},{value:"Working with JSON responses",id:"working-with-json-responses",level:3},{value:"Using question adapters",id:"using-question-adapters",level:3},{value:"Using type-safe assertions",id:"using-type-safe-assertions",level:3},{value:"Transforming data types",id:"transforming-data-types",level:3},{value:"Composing interactions into tasks",id:"composing-interactions-into-tasks",level:2},{value:"API Actions Class Pattern",id:"api-actions-class-pattern",level:3},{value:"Reusing API interactions in web-based scenarios",id:"reusing-api-interactions-in-web-based-scenarios",level:2},{value:"Using Serenity/JS REST testing templates",id:"using-serenityjs-rest-testing-templates",level:2},{value:"Next steps",id:"next-steps",level:2}];function u(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components},{Figure:o}=t;return o||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Figure",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h1,{id:"your-first-api-test-scenario",children:"Your first API test scenario"}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Serenity/JS"})," streamlines  designing and implementing test scenarios that interact with REST- and other HTTP-based APIs.\nThe single, consistent programming model offered by the framework and based on the Serenity/JS ",(0,n.jsx)(t.a,{href:"/handbook/design/screenplay-pattern",children:"Screenplay Pattern"}),"\nhelps you write ",(0,n.jsx)(t.strong,{children:"dedicated API test scenarios"})," or ",(0,n.jsx)(t.strong,{children:"incorporate API interactions into web-based tests"})," to enable ",(0,n.jsx)(t.a,{href:"/handbook/web-testing/blended-testing/",children:"Blended Testing"}),"."]}),"\n",(0,n.jsx)(t.p,{children:"Similarly to other test automation frameworks, you can use Serenity/JS REST to send HTTP requests and verify the responses.\nWith Serenity/JS, however, both those activities form a natural part of the actor workflow, reuse the same assertions, synchronisation mechanisms, and reporting capabilities\nas any other kind of Serenity/JS test scenario. This makes them not only easier to write and maintain, but also to share across test suites, projects, and teams."}),"\n",(0,n.jsx)(t.p,{children:"Using the same, consistent programming model to write both API and web-based scenarios can be incredibly powerful as it\nsignificantly reduces the cognitive load on your team and unlocks code reuse patterns across your organisation."}),"\n",(0,n.jsx)(t.p,{children:"To demonstrate how this can be accomplished, in this tutorial I'll show you how to:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"write an API test using Serenity/JS,"}),"\n",(0,n.jsx)(t.li,{children:"identify reusable sequences of API interactions,"}),"\n",(0,n.jsxs)(t.li,{children:["extract them as ",(0,n.jsx)(t.em,{children:"tasks"}),","]}),"\n",(0,n.jsx)(t.li,{children:"and apply them in the context of a web-based scenario."}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"writing-dedicated-api-test-scenarios",children:"Writing dedicated API test scenarios"}),"\n",(0,n.jsxs)(t.p,{children:['We\'ll write a simple "health check" test, where an actor sends a HTTP request to check if a web service is up and running.\nYou can write API test scenarios like this using one of the ',(0,n.jsx)(t.a,{href:"/handbook/getting-started/project-templates/#resthttp-api-testing",children:"Serenity/JS Project Templates for API Testing"}),",\nas they integrate Serenity/JS directly with ",(0,n.jsx)(t.a,{href:"/handbook/test-runners/cucumber/",children:"Cucumber"}),", ",(0,n.jsx)(t.a,{href:"/handbook/test-runners/mocha/",children:"Mocha"}),", or ",(0,n.jsx)(t.a,{href:"/handbook/test-runners/jasmine/",children:"Jasmine"}),",\nwithout the overhead of managing a web browser."]}),"\n",(0,n.jsxs)(t.p,{children:["For our example, we'll use the ",(0,n.jsx)(t.a,{href:"https://www.githubstatus.com/api",children:"GitHub Status API"}),"\nand make the actor check if a ",(0,n.jsx)(t.a,{href:"/api/rest/class/GetRequest/",children:(0,n.jsx)(t.code,{children:"GetRequest"})})," sent to the ",(0,n.jsx)(t.a,{href:"https://www.githubstatus.com/api#status",children:"status endpoint"}),"\nresults in a ",(0,n.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status#successful_responses",children:(0,n.jsx)(t.code,{children:"200 OK"})})," response status. Next, we'll check if the JSON body of the response contains a message indicating that all GitHub systems are operational,\nand if the status we received from the API is up to date."]}),"\n",(0,n.jsx)(i.A,{groupId:"code-examples",children:(0,n.jsx)(r.A,{value:"mocha-(api-only)",label:"Mocha (API-only)",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-typescript",metastring:'title="spec/github-status.spec.ts" tab={"label":"Mocha (API-only)"}',children:"import { Ensure, equals } from '@serenity-js/assertions'\nimport { actorCalled, Cast, engage } from '@serenity-js/core'\nimport { CallAnApi, GetRequest, LastResponse, Send } from '@serenity-js/rest'\nimport { before,describe, it } from 'mocha'\n\ndescribe('GitHub Status API v2', () => {\n\n    const baseURL = 'https://www.githubstatus.com/api/v2/'\n\n    before(() => {\n        engage(Cast.where(actor =>\n            // highlight-next-line\n            actor.whoCan(CallAnApi.at(baseURL)))                  // 1) Add ability\n        )\n    })\n\n    describe('status endpoint', () => {\n\n        it('returns 200 OK when GitHub is up', async () => {\n\n            // highlight-start\n            await actorCalled('Apisitt').attemptsTo(\n                Send.a(GetRequest.to('status.json')),             // 2) Send request\n                Ensure.that(LastResponse.status(), equals(200)),  // 3) Verify response\n            )\n            // highlight-end\n        })\n    })\n})\n"})})})}),"\n",(0,n.jsxs)(t.p,{children:["If you've already completed the ",(0,n.jsx)(t.a,{href:"/handbook/web-testing/your-first-web-scenario/",children:"Serenity/JS web testing tutorial"}),",\nthe above scenario should look familiar:"]}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["We start by giving all actors in our ",(0,n.jsx)(t.a,{href:"/api/core/class/Cast",children:(0,n.jsx)(t.code,{children:"Cast"})})," abilities to ",(0,n.jsx)(t.a,{href:"/api/rest/class/CallAnApi",children:(0,n.jsx)(t.code,{children:"CallAnApi"})})," at a given ",(0,n.jsx)(t.code,{children:"baseURL"})]}),"\n",(0,n.jsxs)(t.li,{children:["Next, the actor sends a ",(0,n.jsx)(t.a,{href:"/api/rest/class/GetRequest",children:(0,n.jsx)(t.code,{children:"GetRequest"})})," to the ",(0,n.jsx)(t.code,{children:"status"})," endpoint"]}),"\n",(0,n.jsxs)(t.li,{children:["Finally, the actor ensures that the ",(0,n.jsx)(t.a,{href:"/api/rest/class/LastResponse#status",children:(0,n.jsx)(t.code,{children:"LastResponse.status()"})})," is ",(0,n.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status#successful_responses",children:(0,n.jsx)(t.code,{children:"200 OK"})})]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"If all goes well, the scenario passes, and when the assertion fails, Serenity/JS produces a test report showing how the actual response status code differs from the expected one."}),"\n",(0,n.jsxs)(t.admonition,{title:"Want to try it yourself?",type:"tip",children:[(0,n.jsxs)(t.p,{children:["If you'd like to follow along with the coding, generate a new project from ",(0,n.jsx)(t.a,{href:"https://github.com/serenity-js/serenity-js-mocha-template/generate",children:"Serenity/JS Project Template for Mocha"})," and clone it to your machine,\nor simply start a new GitPod workspace to experiment with Serenity/JS in your browser!"]}),(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{href:"https://gitpod.io/#https://github.com/serenity-js/serenity-js-mocha-template/",children:(0,n.jsx)(t.img,{src:"https://gitpod.io/button/open-in-gitpod.svg",alt:"Open in Gitpod"})})})]}),"\n",(0,n.jsx)(t.h3,{id:"working-with-json-responses",children:"Working with JSON responses"}),"\n",(0,n.jsx)(t.p,{children:"Our health check scenario is rather rudimentary at the moment as it only verifies if the service is up and running and received the request.\nLet's make it more thorough by verifying that the response body contains a message indicating that all GitHub systems are operational."}),"\n",(0,n.jsxs)(t.p,{children:["As you can see in the ",(0,n.jsx)(t.a,{href:"https://www.githubstatus.com/api#status",children:"GitHub Status API documentation"}),",\nthe ",(0,n.jsx)(t.code,{children:"status.indicator"})," field in the response JSON should have the value of ",(0,n.jsx)(t.code,{children:"none"})," when all systems work as expected, and ",(0,n.jsx)(t.code,{children:"minor"}),", ",(0,n.jsx)(t.code,{children:"major"}),", or ",(0,n.jsx)(t.code,{children:"critical"})," to indicate partial or complete service disruption:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-json",metastring:'title="https://www.githubstatus.com/api/v2/status.json"',children:'{\n  "page":{\n    "id":"kctbh9vrtdwd",\n    "name":"GitHub",\n    "url":"https://www.githubstatus.com",\n    "updated_at": "2023-09-29T07:41:15Z"\n  },\n  "status": {\n    "description": "Partial System Outage",\n    "indicator": "major"\n  }\n}\n'})}),"\n",(0,n.jsxs)(t.p,{children:["With Serenity/JS, you can access the last response body using the ",(0,n.jsx)(t.a,{href:"/handbook/design/screenplay-pattern/#questions",children:"question"})," about ",(0,n.jsx)(t.a,{href:"/api/rest/class/LastResponse/#body",children:(0,n.jsx)(t.code,{children:"LastResponse.body<T>()"})}),".\nYou can also access any fields and nested objects in the response body as Serenity/JS\nconveniently and automatically wraps them in ",(0,n.jsx)(t.a,{href:"/api/core/class/Question",children:(0,n.jsx)(t.code,{children:"Question"})})," objects and makes them available for further assertions."]}),"\n",(0,n.jsx)(i.A,{groupId:"code-examples",children:(0,n.jsx)(r.A,{value:"mocha-(api-only)",label:"Mocha (API-only)",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-typescript",metastring:'title="spec/github-status.spec.ts" tab={"label":"Mocha (API-only)"}',children:"import { Ensure, equals } from '@serenity-js/assertions'\nimport { actorCalled, Cast, engage } from '@serenity-js/core'\nimport { CallAnApi, GetRequest, LastResponse, Send } from '@serenity-js/rest'\nimport { before, describe, it } from 'mocha'\n\ndescribe('GitHub Status API v2', () => {\n\n    // ... Configuration skipped for brevity\n\n    describe('status endpoint', () => {\n\n        it('returns a status indicator of \"none\" when all GitHub systems are functional', async () => {\n\n            await actorCalled('Apisitt').attemptsTo(\n                Send.a(GetRequest.to('status.json')),\n                // highlight-start\n                Ensure.that(LastResponse.status(), equals(200)),\n                Ensure.that(\n                    LastResponse.body().status.indicator,\n                    equals('none')\n                ),\n                // highlight-end\n            )\n        })\n    })\n})\n"})})})}),"\n",(0,n.jsxs)(t.p,{children:["Note how in the above example you can perform several assertions against the ",(0,n.jsx)(t.a,{href:"/api/rest/class/LastResponse/",children:(0,n.jsx)(t.code,{children:"LastResponse"})}),"\nwithout having to introduce any additional local variables or helper functions,\nand how the code remains readable and easy to understand even to non-technical stakeholders."]}),"\n",(0,n.jsx)(t.h3,{id:"using-question-adapters",children:"Using question adapters"}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.a,{href:"/api/rest/class/LastResponse/",children:(0,n.jsx)(t.code,{children:"LastResponse"})})," proxies the underlying ",(0,n.jsx)(t.code,{children:"AxiosResponse"})," object through Serenity/JS ",(0,n.jsx)(t.a,{href:"/api/core#QuestionAdapter",children:(0,n.jsx)(t.code,{children:"question adapters"})})," to make it easy to work with in Screenplay Pattern scenarios.\nThis mechanism lets you access the desired field like ",(0,n.jsx)(t.code,{children:"status.indicator"})," just like you would access a nested property of a regular deserialised JSON object:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-typescript",children:"await actorCalled('Apisitt').attemptsTo(\n    Send.a(GetRequest.to('summary.json')),\n    // highlight-start\n    Ensure.that(\n        LastResponse.body().status.indicator,\n        equals('none')\n    ),\n    // highlight-end\n)\n"})}),"\n",(0,n.jsxs)(t.p,{children:["You can use the same mechanism in the context of much more complex responses, too. For example, the data structure\nreturned by the ",(0,n.jsxs)(t.a,{href:"https://www.githubstatus.com/api#summary",children:[(0,n.jsx)(t.code,{children:"summary"})," endpoint"]}),"\ncontains nested arrays of objects. Here Serenity/JS lets you access not just such nested objects\nbut also their properties like the ",(0,n.jsxs)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/length",children:[(0,n.jsx)(t.code,{children:".length"})," of an Array"]}),":"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-typescript",children:"await actorCalled('Apisitt').attemptsTo(\n    Send.a(GetRequest.to('summary.json')),\n    // highlight-start\n    Ensure.that(\n        LastResponse.body().incidents.length,\n        equals(0)\n    ),\n    // highlight-end\n)\n"})}),"\n",(0,n.jsxs)(t.p,{children:["Serenity/JS can even proxy methods exposed by the underlying objects, like ",(0,n.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/toUpperCase",children:(0,n.jsx)(t.code,{children:".toUpperCase()"})}),":"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-typescript",children:"await actorCalled('Apisitt').attemptsTo(\n    Send.a(GetRequest.to('summary.json')),\n    // highlight-start\n    Ensure.that(\n        LastResponse.body().status.indicator.toUpperCase(),\n        equals('NONE')\n    ),\n    // highlight-end\n)\n"})}),"\n",(0,n.jsxs)(t.p,{children:["Properties accessed this way, as well as results of method calls, are automatically wrapped in ",(0,n.jsx)(t.a,{href:"/api/core/class/Question",children:(0,n.jsx)(t.code,{children:"Question"})})," objects behind the scenes so that you can avoid unnecessary boilerplate code and noise in your test scenarios."]}),"\n",(0,n.jsx)(t.h3,{id:"using-type-safe-assertions",children:"Using type-safe assertions"}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.a,{href:"/api/rest/class/LastResponse/#body",children:(0,n.jsx)(t.code,{children:"LastResponse.body<T>()"})})," supports ",(0,n.jsx)(t.a,{href:"https://www.typescriptlang.org/docs/handbook/2/generics.html",children:"TypeScript generics"}),".\nThis allows you to specify a TypeScript type describing the ",(0,n.jsx)(t.strong,{children:"structure of the response body"})," and benefit from type-safe assertions and code completion in your IDE."]}),"\n",(0,n.jsxs)(t.p,{children:["For example, the response of the ",(0,n.jsxs)(t.a,{href:"https://www.githubstatus.com/api#status",children:[(0,n.jsx)(t.code,{children:"status"})," endpoint"]})," returns a JSON object with the following structure:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-json",metastring:'title="https://www.githubstatus.com/api/v2/status.json"',children:'{\n  "page":{\n    "id":"kctbh9vrtdwd",\n    "name":"GitHub",\n    "url":"https://www.githubstatus.com",\n    "updated_at": "2023-09-28T08:05:39Z"\n  },\n  "status": {\n    "description": "Partial System Outage",\n    "indicator": "major"\n  }\n}\n'})}),"\n",(0,n.jsxs)(t.p,{children:["Such response could be described using the following TypeScript ",(0,n.jsx)(t.code,{children:"StatusJSON"})," type:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-typescript",children:"interface StatusJSON {\n    page: {\n        id: string,\n        name: string,\n        url: string,\n        updated_at: string\n    };\n    status: {\n        description: string,\n        indicator: 'none' | 'minor' | 'major' | 'critical'\n    };\n}\n"})}),"\n",(0,n.jsxs)(t.p,{children:["You can then use the ",(0,n.jsx)(t.code,{children:"StatusJSON"})," type to describe the structure of the response body in your test scenario:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-typescript",children:"await actorCalled('Apisitt').attemptsTo(\n    Send.a(GetRequest.to('status.json')),\n    Ensure.that(LastResponse.status(), equals(200)),\n    // highlight-next-line\n    Ensure.that(LastResponse.body<StatusJSON>().status.indicator, equals('none')),\n)\n"})}),"\n",(0,n.jsx)(t.p,{children:"Using generic types like the one above allows your TypeScript transpiler and your IDE to warn you when your code doesn't match the structure of the response body:"}),"\n",(0,n.jsx)(o,{caption:"Visual Studio Code user interface showing a typo resulting in a type error",img:s(91413)}),"\n",(0,n.jsx)(t.admonition,{title:"Full-stack type safety with Serenity/JS",type:"tip",children:(0,n.jsx)(t.p,{children:"Serenity/JS support for TypeScript generics will benefit you even more when the HTTP APIs of your system under test are also written in TypeScript.\nIn such case, you can reuse the type definitions from your API codebase in your test scenarios to make sure your tests are always in sync with the API."})}),"\n",(0,n.jsx)(t.h3,{id:"transforming-data-types",children:"Transforming data types"}),"\n",(0,n.jsxs)(t.p,{children:["HTTP APIs operating on JSON data structures use primitive data types like ",(0,n.jsx)(t.code,{children:"string"})," or ",(0,n.jsx)(t.code,{children:"number"})," (or composites thereof) to represent more complex types such as monetary amounts, dates, or timestamps.\nWhile this strategy makes it easier for the API to serialise a complex type and transport it over the HTTP protocol, it also makes it harder for an automated test to work with.\nThat's because such simplified data representations would need to be deserialised before any meaningful assertions could be performed against them."]}),"\n",(0,n.jsxs)(t.p,{children:["For example, how would you check if a timestamp expressed as ",(0,n.jsx)(t.code,{children:'"updated_at": "2023-09-29T07:41:15Z"'})," represented a moment that occurred ",(0,n.jsx)(t.em,{children:"within the last 24 hours"}),"?"]}),"\n",(0,n.jsxs)(t.p,{children:["Thankfully, here too Serenity/JS has you covered as any ",(0,n.jsx)(t.a,{href:"/api/core/class/Question",children:(0,n.jsx)(t.code,{children:"Question"})})," can be transformed to another type using the ",(0,n.jsx)(t.a,{href:"/api/core/class/Question/#as",children:(0,n.jsx)(t.code,{children:"Question.as"})})," method."]}),"\n",(0,n.jsxs)(t.p,{children:["Here, you could transform the ",(0,n.jsx)(t.code,{children:"page.updated_at"})," field of the response body to a ",(0,n.jsx)(t.a,{href:"/api/core/class/Timestamp/",children:(0,n.jsx)(t.code,{children:"Timestamp"})}),"\nand make sure ",(0,n.jsx)(t.a,{href:"/api/assertions/function/isAfter/",children:"it's after the current time"}),", less the ",(0,n.jsx)(t.a,{href:"/api/core/class/Duration/",children:"duration of 24 hours"}),":"]}),"\n",(0,n.jsx)(i.A,{groupId:"code-examples",children:(0,n.jsx)(r.A,{value:"mocha-(api-only)",label:"Mocha (API-only)",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-typescript",metastring:'title="spec/github-status.spec.ts" tab={"label":"Mocha (API-only)"}',children:"import { Ensure, equals, isAfter } from '@serenity-js/assertions'\nimport { actorCalled, Cast, engage, Duration, Timestamp } from '@serenity-js/core'\nimport { CallAnApi, GetRequest, LastResponse, Send } from '@serenity-js/rest'\nimport { before, describe, it } from 'mocha'\n\ndescribe('GitHub Status API v2', () => {\n\n    // ...\n\n    describe('status endpoint', () => {\n\n        it('returns a status indicator of \"none\" when all GitHub systems are functional', async () => {\n\n            await actorCalled('Apisitt').attemptsTo(\n                Send.a(GetRequest.to('status.json')),\n\n                Ensure.that(LastResponse.status(), equals(200)),\n                Ensure.that(LastResponse.body<StatusJSON>().status.indicator, equals('none')),\n                // highlight-start\n                Ensure.that(\n                    LastResponse.body<StatusJSON>().page.updated_at.as(Timestamp.fromJSON),\n                    isAfter(Timestamp.now().less(Duration.ofHours(24)))\n                ),\n                // highlight-end\n            )\n        })\n    })\n})\n"})})})}),"\n",(0,n.jsx)(t.h2,{id:"composing-interactions-into-tasks",children:"Composing interactions into tasks"}),"\n",(0,n.jsxs)(t.p,{children:["As you can see, Serenity/JS makes it easy and intuitive to write test scenarios that interact with HTTP-based APIs.\nWhat's even more powerful, however, is that just like with the web-based interactions, API interactions\ncan also be composed into ",(0,n.jsx)(t.a,{href:"/handbook/design/screenplay-pattern/#tasks",children:"tasks"}),"."]}),"\n",(0,n.jsx)(t.p,{children:"Conceptually similar to functions, Serenity/JS tasks offer an easy way to associate business domain meaning with sequences of activities\nand turn them into reusable building blocks you can share across test suites, projects, and teams."}),"\n",(0,n.jsxs)(t.p,{children:["For example, you could create a ",(0,n.jsx)(t.code,{children:"ensureAllSystemsOperational"})," task function that encapsulated the logic of\nensuring that all GitHub systems are operational.\nYou could then us it in your test scenario instead of the individual low-level interactions:"]}),"\n",(0,n.jsx)(i.A,{groupId:"code-examples",children:(0,n.jsx)(r.A,{value:"mocha-(api-only)",label:"Mocha (API-only)",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-typescript",metastring:'title="spec/github-status.spec.ts" tab={"label":"Mocha (API-only)"}',children:"import { Ensure, equals, isAfter } from '@serenity-js/assertions'\nimport { actorCalled, Cast, engage, Duration, Task, Timestamp } from '@serenity-js/core'\nimport { CallAnApi, GetRequest, LastResponse, Send } from '@serenity-js/rest'\nimport { before, describe, it } from 'mocha'\n\ndescribe('GitHub Status API v2', () => {\n\n    // ...\n\n    describe('status endpoint', () => {\n\n        // highlight-start\n        const ensureAllSystemsOperational = () =>\n            Task.where(`#actor ensures all GitHub systems are operational`,\n                Send.a(GetRequest.to('status.json')),\n                Ensure.that(LastResponse.status(), equals(200)),\n                Ensure.that(LastResponse.body<StatusJSON>().status.indicator, equals('none')),\n                Ensure.that(\n                    LastResponse.body<StatusJSON>().page.updated_at.as(Timestamp.fromJSON),\n                    isAfter(Timestamp.now().less(Duration.ofHours(24)))\n                ),\n            )\n        // highlight-end\n\n        it('returns a status indicator of \"none\" when all GitHub systems are functional', async () => {\n\n            await actorCalled('Apisitt').attemptsTo(\n                // highlight-next-line\n                ensureAllSystemsOperational(),\n            )\n        })\n    })\n})\n"})})})}),"\n",(0,n.jsx)(t.p,{children:"Extracting individual interactions into tasks makes your test scenarios more readable and easier to maintain.\nIt also allows you to reuse the same task in other scenarios."}),"\n",(0,n.jsx)(t.h3,{id:"api-actions-class-pattern",children:"API Actions Class Pattern"}),"\n",(0,n.jsx)(t.p,{children:"To take code reusability to the next level, you can extract the task function together with any associated information,\nlike the interfaces describing the response structure, or information about API endpoint URLs and so on, into a completely separate class."}),"\n",(0,n.jsxs)(t.p,{children:["I called this pattern the ",(0,n.jsx)(t.strong,{children:"API Actions Class"})," pattern, and you'll notice that it's conceptually similar to the ",(0,n.jsx)(t.a,{href:"/handbook/web-testing/page-objects-pattern/",children:"Lean Page Objects Pattern"}),"\nI developed in the context of web UI automation."]}),"\n",(0,n.jsx)(t.p,{children:"API Actions Class pattern is a great way to encapsulate the knowledge about the API and make your test code reusable\nnot only across test scenarios within a single test suite,\nbut also across test suites, projects, and teams. After all, an API Actions Class is just a regular TypeScript class.\nYou could publish it as part of a Node.js module to your organisation's private NPM registry\nand share with other teams."}),"\n",(0,n.jsxs)(t.p,{children:["In our example, we could create a ",(0,n.jsx)(t.code,{children:"GitHubStatus"})," class that encapsulated the logic of ensuring that all GitHub systems are operational,\ntogether with the information about the API endpoint URLs and the structure of the response body:"]}),"\n",(0,n.jsx)(i.A,{groupId:"code-examples",children:(0,n.jsx)(r.A,{value:"githubstatus-task",label:"GitHubStatus Task",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-typescript",metastring:'title="src/GitHubStatus.ts" tab={"label":"GitHubStatus Task"}',children:"import { Ensure, equals, isAfter } from '@serenity-js/assertions'\nimport { Duration, Task, Timestamp } from '@serenity-js/core'\nimport { GetRequest, LastResponse, Send } from '@serenity-js/rest'\n\nexport class GitHubStatus {\n    private static readonly baseURL = 'https://www.githubstatus.com/api/v2/'\n    private static readonly statusJson = `${ GitHubStatus.baseURL }status.json}`\n\n    // highlight-start\n    static ensureAllSystemsOperational = () =>\n        Task.where(`#actor ensures all GitHub systems are operational`,\n            Send.a(GetRequest.to(GitHubStatus.statusJson)),\n            Ensure.that(LastResponse.status(), equals(200)),\n            Ensure.that(LastResponse.body<StatusJSON>().status.indicator, equals('none')),\n            Ensure.that(\n                LastResponse.body<StatusJSON>().page.updated_at.as(Timestamp.fromJSON),\n                isAfter(Timestamp.now().less(Duration.ofHours(24)))\n            ),\n        )\n    // highlight-end\n}\n\ninterface StatusJSON {\n    page: {\n        id: string,\n        name: string,\n        url: string,\n        updated_at: string\n    };\n    status: {\n        description: string,\n        indicator: 'none' | 'minor' | 'major' | 'critical'\n    };\n}\n"})})})}),"\n",(0,n.jsxs)(t.p,{children:["Note how the information about the API endpoint URLs is ",(0,n.jsx)(t.code,{children:"private"}),", and so it won't leak out of the class and into test scenarios.\nShould the API change, you'll only need to update the actions class, and all the test scenarios using it will automatically\nstart using the new endpoint URLs and data structures."]}),"\n",(0,n.jsxs)(t.p,{children:["With an API Actions Class in place, we could then update our test scenario to use the ",(0,n.jsx)(t.code,{children:"GitHubStatus"})," class instead of the task function\nwe used previously:"]}),"\n",(0,n.jsx)(i.A,{groupId:"code-examples",children:(0,n.jsx)(r.A,{value:"githubstatus-test scenario",label:"GitHubStatus Test Scenario",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-typescript",metastring:'title="spec/github-status.spec.ts" tab={"label":"GitHubStatus Test Scenario"}',children:"import { actorCalled } from '@serenity-js/core'\nimport { before, describe, it } from 'mocha'\n\nimport { GitHubStatus } from '../src/GitHubStatus'   // highlight-line\n\ndescribe('GitHub Status API v2', () => {\n\n    // ...\n\n    describe('status endpoint', () => {\n\n        it('returns a status indicator of \"none\" when all GitHub systems are functional', async () => {\n\n            await actorCalled('Apisitt').attemptsTo(\n                // highlight-next-line\n                GitHubStatus.ensureAllSystemsOperational(),\n            )\n        })\n    })\n})\n"})})})}),"\n",(0,n.jsx)(t.h2,{id:"reusing-api-interactions-in-web-based-scenarios",children:"Reusing API interactions in web-based scenarios"}),"\n",(0,n.jsxs)(t.p,{children:["The advantage of ",(0,n.jsx)(t.strong,{children:"encapsulating API interactions in tasks"})," and organising them into ",(0,n.jsx)(t.strong,{children:"API Actions Classes"}),"\nis that it makes your code easy to reuse in other test scenarios.\nThe beauty of the Serenity/JS Screenplay Pattern is that the universal programming model it enables\nallows you to reuse such test code in other test scenarios within the same test suite and in entirely different contexts."]}),"\n",(0,n.jsxs)(t.p,{children:["A popular use case is to ",(0,n.jsx)(t.strong,{children:"reuse API interactions in web-based scenarios"})," to perform ",(0,n.jsx)(t.strong,{children:"health checks"}),", ",(0,n.jsx)(t.strong,{children:"authentication"}),",\nor ",(0,n.jsx)(t.strong,{children:"test data setup and teardown"})," operations that would be much more expensive to achieve through the web UI.\nI call this approach ",(0,n.jsx)(t.a,{href:"/handbook/web-testing/blended-testing/",children:(0,n.jsx)(t.strong,{children:"Blended Testing"})}),"."]}),"\n",(0,n.jsxs)(t.p,{children:["To support you in using Blended Testing in your test suites,\nall ",(0,n.jsx)(t.a,{href:"/handbook/test-runners/",children:"Serenity/JS web test runner adapters"}),"\nand ",(0,n.jsx)(t.a,{href:"/handbook/getting-started/project-templates/#web-testing",children:"Serenity/JS Project Templates for Web Testing"})," come with ",(0,n.jsx)(t.strong,{children:"built-in support for REST and HTTP-based interactions"}),",\nso there's no need to install additional dependencies or manually configure anything."]}),"\n",(0,n.jsxs)(t.p,{children:["For example, you could instruct your Serenity/JS actors to use our ",(0,n.jsx)(t.code,{children:"GitHubStatus"})," API Actions Class\nin a web-based scenario by simply giving them an API task to perform:"]}),"\n",(0,n.jsxs)(i.A,{groupId:"code-examples",children:[(0,n.jsx)(r.A,{value:"playwright-test",label:"Playwright Test",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-typescript",metastring:'title="e2e/github-sponsors.spec.ts" tab={"label":"Playwright Test"}',children:"import { describe, it, test } from '@serenity-js/playwright-test'\nimport { Ensure, startsWith } from '@serenity-js/assertions'\nimport { Navigate, Page } from '@serenity-js/web'\n\nimport { GitHubStatus } from '../src/GitHubStatus'\n\ndescribe('GitHub', () => {\n\n    // Set the baseURL directly in the test or in playwright.config.ts\n    //\n    // Note that Serenity/JS Playwright Test adapter configures the cast of actors for you\n    // and ensures that each actor receives the ability to CallAnApi.at(baseURL)\n    test.use({\n        baseURL: 'https://github.com/'\n    })\n\n    describe('Sponsors', () => {\n\n        it('lets developers support Serenity/JS', async ({ actor }) => {\n\n            await actor.attemptsTo(\n                // highlight-start\n                // Use the status API to ensure system is ready to be tested\n                GitHubStatus.ensureAllSystemsOperational(),\n\n                // Perform any web-based interactions\n                Navigate.to('/sponsors/serenity-js'),\n                Ensure.that(\n                    Page.current().title(),\n                    startsWith('Sponsor @serenity-js on GitHub Sponsors')\n                ),\n                // highlight-end\n                // ...\n            )\n        })\n    })\n})\n"})})}),(0,n.jsx)(r.A,{value:"webdriverio",label:"WebdriverIO",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-typescript",metastring:'title="e2e/github-sponsors.spec.ts" tab={"label":"WebdriverIO"}',children:"import { describe, it } from 'mocha'\nimport { actorCalled } from '@serenity-js/core'\nimport { Ensure, startsWith } from '@serenity-js/assertions'\nimport { Navigate, Page } from '@serenity-js/web'\n\nimport { GitHubStatus } from '../src/GitHubStatus'\n\ndescribe('GitHub', () => {\n\n    // Set the baseUrl in wdio.conf.ts, for example:\n    //\n    //   baseUrl: 'https://github.com/'\n    //\n    // Note that Serenity/JS WebdriverIO adapter configures the cast of actors for you\n    // and ensures that each actor receives the ability to CallAnApi.at(baseUrl)\n\n    describe('Sponsors', () => {\n\n        it('lets developers support Serenity/JS', async () => {\n\n            await actorCalled('Apisitt').attemptsTo(\n                // highlight-start\n                // Use the status API to ensure system is ready to be tested\n                GitHubStatus.ensureAllSystemsOperational(),\n\n                // Perform any web-based interactions\n                Navigate.to('/sponsors/serenity-js'),\n                Ensure.that(\n                    Page.current().title(),\n                    startsWith('Sponsor @serenity-js on GitHub Sponsors')\n                ),\n                // highlight-end\n                // ...\n            )\n        })\n    })\n})\n"})})}),(0,n.jsx)(r.A,{value:"protractor",label:"Protractor",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-typescript",metastring:'title="e2e/github-sponsors.spec.ts" tab={"label":"Protractor"}',children:"import { describe, it } from 'mocha'\nimport { actorCalled } from '@serenity-js/core'\nimport { Ensure, startsWith } from '@serenity-js/assertions'\nimport { Navigate, Page } from '@serenity-js/web'\n\nimport { GitHubStatus } from '../src/GitHubStatus'\n\ndescribe('GitHub', () => {\n\n    // Set the baseUrl in protractor.conf.js, for example:\n    //\n    //   baseUrl: 'https://github.com/'\n    //\n    // Note that Serenity/JS Protractor adapter configures the cast of actors for you\n    // and ensures that each actor receives the ability to CallAnApi.at(baseUrl)\n\n    describe('Sponsors', () => {\n\n        it('lets developers support Serenity/JS', async () => {\n\n            await actorCalled('Apisitt').attemptsTo(\n                // highlight-start\n                // Use the status API to ensure system is ready to be tested\n                GitHubStatus.ensureAllSystemsOperational(),\n\n                // Perform any web-based interactions\n                Navigate.to('/sponsors/serenity-js'),\n                Ensure.that(\n                    Page.current().title(),\n                    startsWith('Sponsor @serenity-js on GitHub Sponsors')\n                ),\n                // highlight-end\n                // ...\n            )\n        })\n    })\n})\n"})})})]}),"\n",(0,n.jsx)(t.h2,{id:"using-serenityjs-rest-testing-templates",children:"Using Serenity/JS REST testing templates"}),"\n",(0,n.jsxs)(t.p,{children:["Use ",(0,n.jsx)(t.a,{href:"/handbook/getting-started/project-templates/",children:"Serenity/JS Project Templates"})," to create a new GitHub repository for your automation project in seconds."]}),"\n",(0,n.jsxs)(t.p,{children:["Remember that each Serenity/JS template comes with a ",(0,n.jsx)(t.a,{href:"/handbook/getting-started/project-templates/#serenityjs-gitpods",children:"GitPod workspace"})," that uses a dedicated Docker image with all the required dependencies\nand comes with pre-configured VisualStudio Code extensions to help you experiment with running Serenity/JS straight away in your browser with no local installation required."]}),"\n",(0,n.jsx)(t.h2,{id:"next-steps",children:"Next steps"}),"\n",(0,n.jsx)(t.p,{children:"Congratulations! \ud83e\udd73 You've just learnt how to write REST interactions using Serenity/JS and reuse your test code!"}),"\n",(0,n.jsx)(t.p,{children:"If you enjoyed this tutorial, please leave a \ud83d\udc4d in the reactions section below."}),"\n",(0,n.jsx)(t.p,{children:"Now that you know the basics, it's time to take a deeper dive into the Serenity/JS REST module and learn more about:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"/handbook/api-testing/configuring-http-client/",children:"Configuring the HTTP client"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"/handbook/api-testing/sending-requests/",children:"Sending HTTP requests"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"/handbook/api-testing/verifying-responses/",children:"Verifying the responses"})}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:["New tutorials and videos are coming soon, follow ",(0,n.jsx)(t.a,{href:"https://www.linkedin.com/company/serenity-js",children:"Serenity/JS on LinkedIn"})," and subscribe to ",(0,n.jsx)(t.a,{href:"https://www.youtube.com/channel/UC0RdeVPyjtJopVHvlLrXd1Q",children:"Serenity/JS YouTube channel"})," to get notified when they're available!"]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.a,{href:"https://www.linkedin.com/company/serenity-js",children:(0,n.jsx)(t.img,{src:"https://img.shields.io/badge/Follow%20Serenity%2FJS-0077B5?style=for-the-badge&logo=linkedin&logoColor=white",alt:"LinkedIn Follow"})}),"\n",(0,n.jsx)(t.a,{href:"https://www.youtube.com/@serenity-js",children:(0,n.jsx)(t.img,{src:"https://img.shields.io/badge/Watch%20@serenity--js-E62117?style=for-the-badge&logo=youtube&logoColor=white",alt:"YouTube Follow"})})]}),"\n",(0,n.jsxs)(t.admonition,{title:"Help us help you",type:"info",children:[(0,n.jsxs)(t.p,{children:["Serenity/JS is a free open-source framework, so we rely on our ",(0,n.jsx)(t.a,{href:"https://github.com/sponsors/serenity-js",children:"wonderful GitHub sponsors"})," to keep the lights on."]}),(0,n.jsx)(t.p,{children:"If you appreciate all the effort that goes into making sophisticated tools easy to work with, please support our work and become a Serenity/JS GitHub Sponsor today!"}),(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{href:"https://github.com/sponsors/serenity-js",children:(0,n.jsx)(t.img,{src:"https://img.shields.io/badge/Support%20@serenity%2FJS-703EC8?style=for-the-badge&logo=github&logoColor=white",alt:"GitHub Sponsors"})})})]})]})}function p(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(u,{...e})}):u(e)}},7227:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});s(96540);var n=s(34164);const a={tabItem:"tabItem_Ymn6"};var i=s(74848);function r(e){let{children:t,hidden:s,className:r}=e;return(0,i.jsx)("div",{role:"tabpanel",className:(0,n.A)(a.tabItem,r),hidden:s,children:t})}},45645:(e,t,s)=>{"use strict";s.d(t,{A:()=>p});var n=s(96540),a=s(34164),i=s(24245),r=s(8626),o=s(11062);const l={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var c=s(74848);function d(e){let{className:t,block:s,selectedValue:n,selectValue:r,tabValues:o}=e;const d=[],{blockElementScrollPositionUntilNextRender:h}=(0,i.a_)(),u=e=>{const t=e.currentTarget,s=d.indexOf(t),a=o[s].value;a!==n&&(h(t),r(a))},p=e=>{let t=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const s=d.indexOf(e.currentTarget)+1;t=d[s]??d[0];break}case"ArrowLeft":{const s=d.indexOf(e.currentTarget)-1;t=d[s]??d[d.length-1];break}}t?.focus()};return(0,c.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":s},t),children:o.map((e=>{let{value:t,label:s,attributes:i}=e;return(0,c.jsx)("li",{role:"tab",tabIndex:n===t?0:-1,"aria-selected":n===t,ref:e=>d.push(e),onKeyDown:p,onClick:u,...i,className:(0,a.A)("tabs__item",l.tabItem,i?.className,{"tabs__item--active":n===t}),children:s??t},t)}))})}function h(e){let{lazy:t,children:s,selectedValue:a}=e;const i=(Array.isArray(s)?s:[s]).filter(Boolean);if(t){const e=i.find((e=>e.props.value===a));return e?(0,n.cloneElement)(e,{className:"margin-top--md"}):null}return(0,c.jsx)("div",{className:"margin-top--md",children:i.map(((e,t)=>(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==a})))})}function u(e){const t=(0,r.u)(e);return(0,c.jsxs)("div",{className:(0,a.A)("tabs-container",l.tabList),children:[(0,c.jsx)(d,{...t,...e}),(0,c.jsx)(h,{...t,...e})]})}function p(e){const t=(0,o.A)();return(0,c.jsx)(u,{...e,children:(0,r.v)(e.children)},String(t))}},8626:(e,t,s)=>{"use strict";s.d(t,{u:()=>p,v:()=>c});var n=s(96540),a=s(56347),i=s(36494),r=s(62814),o=s(45167),l=s(69900);function c(e){return n.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,n.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function d(e){const{values:t,children:s}=e;return(0,n.useMemo)((()=>{const e=t??function(e){return c(e).map((e=>{let{props:{value:t,label:s,attributes:n,default:a}}=e;return{value:t,label:s,attributes:n,default:a}}))}(s);return function(e){const t=(0,o.X)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,s])}function h(e){let{value:t,tabValues:s}=e;return s.some((e=>e.value===t))}function u(e){let{queryString:t=!1,groupId:s}=e;const i=(0,a.W6)(),o=function(e){let{queryString:t=!1,groupId:s}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!s)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return s??null}({queryString:t,groupId:s});return[(0,r.aZ)(o),(0,n.useCallback)((e=>{if(!o)return;const t=new URLSearchParams(i.location.search);t.set(o,e),i.replace({...i.location,search:t.toString()})}),[o,i])]}function p(e){const{defaultValue:t,queryString:s=!1,groupId:a}=e,r=d(e),[o,c]=(0,n.useState)((()=>function(e){let{defaultValue:t,tabValues:s}=e;if(0===s.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!h({value:t,tabValues:s}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${s.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const n=s.find((e=>e.default))??s[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:t,tabValues:r}))),[p,m]=u({queryString:s,groupId:a}),[g,b]=function(e){let{groupId:t}=e;const s=function(e){return e?`docusaurus.tab.${e}`:null}(t),[a,i]=(0,l.Dv)(s);return[a,(0,n.useCallback)((e=>{s&&i.set(e)}),[s,i])]}({groupId:a}),y=(()=>{const e=p??g;return h({value:e,tabValues:r})?e:null})();(0,i.A)((()=>{y&&c(y)}),[y]);return{selectedValue:o,selectValue:(0,n.useCallback)((e=>{if(!h({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);c(e),m(e),b(e)}),[m,b,r]),tabValues:r}}},28453:(e,t,s)=>{"use strict";s.d(t,{R:()=>r,x:()=>o});var n=s(96540);const a={},i=n.createContext(a);function r(e){const t=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);